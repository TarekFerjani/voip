(function(e){function t(t){for(var n,o,i=t[0],l=t[1],u=t[2],c=0,m=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/home/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("d3b7"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("2f62"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header",{attrs:{username:e.username}}),e.isLoggedIn&&e.isIdle?a("IdleTimeout"):e._e(),e.isLoggedIn?a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("MainNavbar",{attrs:{MenuTabs:e.MenuTabs},on:{"nav-selection":function(t){return e.navChangeTop(t)}}})],1),a("b-row",[a("b-col",[a(e.NavSelection,{tag:"component"})],1)],1)],1)],1):a("div",[a("Login",{staticClass:"mx-auto"})],1)],1)},o=[],i=(a("ac1f"),a("5319"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"header"}},[a("b-container",{staticClass:"bg-secondary text-white",attrs:{fluid:""}},[a("b-row",[a("h2",{staticClass:"mx-auto"},[e._v("VOIP Phone Info Server")])]),a("b-row",[this.$parent.isLoggedIn?a("div",[e._v("User "+e._s(e.username)+" logged-in")]):e._e()]),a("b-row",[this.$parent.isLoggedIn?a("Logout"):e._e()],1)],1)],1)}),l=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-link",{staticClass:"text-white",on:{click:e.logout}},[e._v("Logout")])},d=[],c={name:"Logout",methods:{logout:function(){this.$store.dispatch("logout").then((function(){console.debug("logout")}))}}},m=c,f=a("2877"),h=Object(f["a"])(m,u,d,!1,null,null,null),p=h.exports,b={name:"Header",components:{Logout:p},props:{username:String}},g=b,_=Object(f["a"])(g,i,l,!1,null,null,null),v=_.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:"Login"}},[a("form",{staticClass:"login",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("label",[e._v("User ID")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user_id,expression:"user_id"}],attrs:{required:"",autocomplete:"username",type:"string"},domProps:{value:e.user_id},on:{input:function(t){t.target.composing||(e.user_id=t.target.value)}}}),a("label",[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{required:"",autocomplete:"current-password",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("hr"),a("button",{attrs:{type:"submit"}},[e._v("Login")])])])},y=[],j={name:"Login",data:function(){return{user_id:"",password:""}},props:{current_user_id:String},methods:{login:function(){var e=this,t=this.user_id,a=this.password;this.$store.dispatch("login",{user_id:t,password:a}).then((function(){return console.debug("logged in")})).catch((function(t){console.log(t);var a=e;a.$bvToast.toast("Please try again",{title:"Login Failure",variant:"warning",toaster:"b-toaster-top-center",autoHideDelay:5e3})}))}}},C=j,P=Object(f["a"])(C,w,y,!1,null,null,null),k=P.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-nav",{attrs:{tabs:""}},e._l(e.MenuTabs,(function(t){return a("b-nav-item",{key:t,on:{click:function(a){return e.click(t)}}},[e._v(" "+e._s(t.replace(/_/g," "))+" ")])})),1)},S=[],L={name:"MainNavbar",props:{MenuTabs:{},NavSelection:String},methods:{click:function(e){this.$emit("nav-selection",e)}}},D=L,x=Object(f["a"])(D,O,S,!1,null,null,null),I=x.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-toast",{attrs:{toaster:"b-toaster-top-center",id:"example-toast",title:"Your session is about to expire.",variant:"warning","no-auto-hide":"",visible:"",solid:""}},[e._v(" You are being timed out due to inactivity. You will be logged off automatically in "+e._s(e.time)+" seconds. ")])},$=[],z={name:"IdleTimeout",data:function(){return{time:30}},methods:{logout:function(){this.$store.dispatch("logout").then((function(){console.debug("logout")}))}},created:function(){var e=this,t=this,a=setInterval((function(){e.time-=1,t.$store.state.idleVue.isIdle||clearInterval(a),t.time<1&&(clearInterval(a),t.logout())}),1e3)}},U=z,T=Object(f["a"])(U,M,$,!1,null,null,null),A=T.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loadingData?a("div",[a("b-row",{attrs:{"align-h":"center"}},[a("b-spinner",{attrs:{label:"Loading..."}})],1)],1):a("div",[a("b-row",{attrs:{"align-h":"center"}},[e.rowData.length>0?a("div",{staticStyle:{height:"100% display: flex","flex-direction":"row overflow: hidden","flex-grow":"1"}},[a("hot-table",{ref:"hotTableComponent",attrs:{settings:e.hotSettings,data:e.rowData}})],1):a("div",[a("p",[e._v("There is no data in the database. Please run a manual sync from the Job Status tab.")])]),a("hr")]),a("b-row",{attrs:{"align-h":"center"}},[a("b-button",{on:{click:e.exportToCsv}},[e._v("Download as CSV")]),a("p"),a("b-button",{on:{click:e.refreshGrid}},[e._v("Refresh")])],1)],1)])},E=[],F=a("3c78"),H={name:"Phone_Combined",data:function(){return{hotSettings:{licenseKey:"non-commercial-and-evaluation",autoRowSize:!1,height:600,colHeaders:!0,autoColumnSize:!0,manualColumnResize:!0,manualColumnMove:!0,fixedColumnsLeft:1,manualColumnFreeze:!0,filters:!0,columnSorting:!0,dropdownMenu:["filter_by_condition"],contextMenu:["alignment","hidden_columns_hide","hidden_columns_show"],hiddenColumns:{indicators:!0},nestedHeaders:[["",{label:"CUCM API",colspan:13},{label:"Phone Scraper",colspan:40}],["Name","Description","Device Pool","Device CSS","Model","First Seen","Last Seen","Reg Time","IPv4","Firmware","Cluster","Protocol","EM Profile","EM Login Time","Serial","Firmware","DN","Model","kem1","kem2","IP Addr","Subnet","Gateway","DHCP","DHCP Server","Domain","DNS1","DNS2","Alt TFTP","TFTP 1","TFTP 2","op_vlan","admin_vlan","CDP Host","CDP IP","CDP Port","LLDP Port","LLDP Port","LLDP Port","CUCM 1","CUCM 2","CUCM 3","CUCM 4","CUCM 5","Info URL","Dir URL","SVC URL","IDLR URL","Info URL Time","Proxy URL","Auth URL","TVS","ITL","Last Scraped"]],columns:[{data:"dname",readOnly:!0},{data:"descr",readOnly:!0},{data:"dpool",readOnly:!0},{data:"dcss",readOnly:!0},{data:"model",readOnly:!0},{data:"fdate",readOnly:!0},{data:"ldate",readOnly:!0},{data:"regstamp",readOnly:!0},{data:"ipv4",readOnly:!0},{data:"fw",readOnly:!0},{data:"cluster",readOnly:!0},{data:"prot",readOnly:!0},{data:"em_profile",readOnly:!0},{data:"em_time",readOnly:!0},{data:"sn",readOnly:!0},{data:"firmware",readOnly:!0},{data:"dn",readOnly:!0},{data:"model",readOnly:!0},{data:"kem1",readOnly:!0},{data:"kem2",readOnly:!0},{data:"ip_address",readOnly:!0},{data:"subnetmask",readOnly:!0},{data:"gateway",readOnly:!0},{data:"dhcp",readOnly:!0},{data:"dhcp_server",readOnly:!0},{data:"domain_name",readOnly:!0},{data:"dns1",readOnly:!0},{data:"dns2",readOnly:!0},{data:"alt_tftp",readOnly:!0},{data:"tftp1",readOnly:!0},{data:"tftp2",readOnly:!0},{data:"op_vlan",readOnly:!0},{data:"admin_vlan",readOnly:!0},{data:"CDP_Neighbor_ID",readOnly:!0},{data:"CDP_Neighbor_IP",readOnly:!0},{data:"CDP_Neighbor_Port",readOnly:!0},{data:"LLDP_Neighbor_ID",readOnly:!0},{data:"LLDP_Neighbor_IP",readOnly:!0},{data:"LLDP_Neighbor_Port",readOnly:!0},{data:"cucm1",readOnly:!0},{data:"cucm2",readOnly:!0},{data:"cucm3",readOnly:!0},{data:"cucm4",readOnly:!0},{data:"cucm5",readOnly:!0},{data:"info_url",readOnly:!0},{data:"dir_url",readOnly:!0},{data:"svc_url",readOnly:!0},{data:"idle_url",readOnly:!0},{data:"info_url_time",readOnly:!0},{data:"proxy_url",readOnly:!0},{data:"auth_url",readOnly:!0},{data:"tvs",readOnly:!0},{data:"ITL",readOnly:!0},{data:"last_scraped",readOnly:!0}]},rowData:[],loadingData:!1}},components:{HotTable:F["a"]},beforeMount:function(){},mounted:function(){this.loadData()},methods:{reSizeColumns:function(e){console.log(e)},exportToCsv:function(){console.log("exporting to csv");var e=this.$refs.hotTableComponent.hotInstance.getPlugin("exportFile");e.downloadFile("csv",{columnHeaders:!0,columnDelimiter:",",fileExtension:"csv",filename:"Phone-Scraper-CSV-file_[YYYY]-[MM]-[DD]",mimeType:"text/csv"})},loadData:function(){var e=this;e.loadingData=!0,this.$http({method:"get",url:"/phonedata/allschema",timeout:12e4}).then((function(t){e.rowData=t.data,e.loadingData=!1})).catch((function(t){console.log(t),e.loadingData=!1}))},refreshGrid:function(){this.loadData()}}},R=H,q=(a("6378"),Object(f["a"])(R,N,E,!1,null,null,null)),V=q.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",[a("h3",[e._v("CUCM Clusters")]),a("p",[e._v("Please use dedicated CUCM App users for this server")]),a("crud-table",{attrs:{endpoint:"/settings_management/cucm",columns:[{key:"cluster_name",label:"Cluster Name"},{key:"server",label:"Server"},{key:"version",label:"Version"},{key:"username",label:"Username"},{key:"ssl_verification",label:"SSL Verification"},{key:"action",label:"Action"}],"form-fields":{cluster_name:"",server:"",version:"",username:"",pd:"",ssl_verification:!1,ssl_ca_trust_file_data:null}},scopedSlots:e._u([{key:"input-fields",fn:function(t){var n=t.formdata;return[a("b-form-group",{attrs:{id:"input-group-2",label:"Cluster Name:","label-for":"input-name"}},[a("b-form-input",{attrs:{id:"input-name",required:"",placeholder:"Enter cluster friendly name (e.g. Cluster1 )"},model:{value:n.cluster_name,callback:function(t){e.$set(n,"cluster_name",t)},expression:"formdata.cluster_name"}})],1),a("b-form-group",{attrs:{id:"input-group-server",label:"CUCM (AXL) Server:","label-for":"input-server"}},[a("b-form-input",{attrs:{id:"input-server",required:"",placeholder:"Enter CUCM publisher (e.g. cucm1.cisco.com )"},model:{value:n.server,callback:function(t){e.$set(n,"server",t)},expression:"formdata.server"}})],1),a("b-form-group",{attrs:{id:"input-group-version",label:"CUCM Version:","label-for":"input-version"}},[a("b-form-select",{attrs:{options:["10.5","11.0","11.5","12.0","12.5"]},model:{value:n.version,callback:function(t){e.$set(n,"version",t)},expression:"formdata.version"}})],1),a("b-form-group",{attrs:{id:"input-group-username",label:"CUCM Application User Username:","label-for":"input-username"}},[a("b-form-input",{attrs:{id:"input-username",required:"",placeholder:"Enter CUCM application userid"},model:{value:n.username,callback:function(t){e.$set(n,"username",t)},expression:"formdata.username"}})],1),a("b-form-group",{attrs:{id:"input-group-pd",label:"CUCM Application User Password:","label-for":"input-pd"}},[a("b-form-input",{attrs:{id:"input-pd",required:"",type:"password",placeholder:"Enter password of above user."},model:{value:n.pd,callback:function(t){e.$set(n,"pd",t)},expression:"formdata.pd"}})],1),a("b-form-group",{attrs:{id:"input-group-ssl",label:"SSL Certificate"}},[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:n.ssl_verification,callback:function(t){e.$set(n,"ssl_verification",t)},expression:"formdata.ssl_verification"}},[e._v(" Verify SSL Certificate ")]),a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Paste base64 certificate if using self signed or non-trusted CA",rows:"3","max-rows":"100"},model:{value:n.ssl_ca_trust_file,callback:function(t){e.$set(n,"ssl_ca_trust_file",t)},expression:"formdata.ssl_ca_trust_file"}})],1)]}}])})],1),a("b-card",[a("h3",[e._v("Sync Schedule")]),a("b-form-group",{attrs:{id:"cucm-sync-time-group",label:"CUCM Updates on the hour at:","label-for":"cucm-sync-time","label-cols":"auto"}},[a("b-form-spinbutton",{attrs:{id:"cucm-sync-time",min:"0",max:"59"},model:{value:e.settings.cucm_update_minute,callback:function(t){e.$set(e.settings,"cucm_update_minute",t)},expression:"settings.cucm_update_minute"}})],1),a("b-form-group",{attrs:{id:"phone-scrape-time-group",label:"Phone scrape runs daily at:","label-for":"phone-scrape-time","label-cols":"auto"}},[a("b-form-timepicker",{attrs:{locale:"en"},model:{value:e.settings.phonescrape_update_time,callback:function(t){e.$set(e.settings,"phonescrape_update_time",t)},expression:"settings.phonescrape_update_time"}})],1),a("b-button",{attrs:{variant:"primary"},on:{click:e.save_settings}},[e._v("Update Scheduler")]),a("p",[e._v("Manual updates can be triggered from the job status page")])],1),a("b-card",[a("h3",[e._v("CUCM Authorized Users")]),a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:"Add new user"}},[a("b-form-input",{attrs:{placeholder:"Enter new CUCM user id"},model:{value:e.new_authorized_user,callback:function(t){e.new_authorized_user=t},expression:"new_authorized_user"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Authorized CUCM Users"}},[a("b-form-select",{attrs:{options:e.authorized_cucm_users,multiple:"","select-size":4},model:{value:e.selected_authorized_cucm_users,callback:function(t){e.selected_authorized_cucm_users=t},expression:"selected_authorized_cucm_users"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-button",{attrs:{variant:"primary"},on:{click:e.add_cucm_users}},[e._v("Add ->")])],1),a("b-col",[a("b-button",{attrs:{variant:"primary"},on:{click:e.remove_cucm_users}},[e._v("Remove")])],1)],1),a("br"),a("b-row",[a("p",[e._v("Note: Users in the Authorized CUCM Users list can login to this application using their CUCM credentials. The login will be authenticated against the first CUCM cluster defined above.")])])],1),"localadmin"==e.username?a("b-card",[a("h3",[e._v("Password Management")]),a("p",[e._v("You can login to this application using an end user from the first CUCM cluster or the 'localadmin' account. You can change the localadmin password below.")]),a("b-form-group",{attrs:{id:"current-localadmin-password-group",label:"current 'localadmin' password:","label-for":"current-localadmin-password","label-cols":"auto"}},[a("b-form-input",{attrs:{type:"password",placeholder:"Enter current password"},model:{value:e.currentLocalAdminPassword,callback:function(t){e.currentLocalAdminPassword=t},expression:"currentLocalAdminPassword"}})],1),a("b-form-group",{attrs:{id:"new-localadmin-password-group",label:"new 'localadmin' password:","label-for":"new-localadmin-password","label-cols":"auto"}},[a("b-form-input",{attrs:{type:"password",placeholder:"Enter new password"},model:{value:e.newLocalAdminPassword,callback:function(t){e.newLocalAdminPassword=t},expression:"newLocalAdminPassword"}})],1),a("b-form-group",{attrs:{id:"confirm-new-localadmin-password-group",label:" confirm new 'localadmin' password:","label-for":"confirm-new-localadmin-password","label-cols":"auto"}},[a("b-form-input",{attrs:{type:"password",placeholder:"Confirm new password",state:e.passwordValidation,debounce:"1500"},model:{value:e.confirm_newLocalAdminPassword,callback:function(t){e.confirm_newLocalAdminPassword=t},expression:"confirm_newLocalAdminPassword"}}),a("b-form-invalid-feedback",[e._v("New passwords do not match")])],1),a("b-button",{attrs:{variant:"primary",disabled:e.newLocalAdminPassword!=e.confirm_newLocalAdminPassword||""==e.newLocalAdminPassword||""==e.currentLocalAdminPassword},on:{click:e.updatePassword}},[e._v("Update Password")]),a("p",[e._v("Do not lose this password. It will be needed if this server loses connection to CUCM cluster #1.")])],1):e._e()],1)},Y=[],G=(a("4160"),a("c975"),a("a434"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!=e.tableData?a("div",[a("b-button",{staticClass:"mb-2",attrs:{variant:"primary",size:"sm"},on:{click:e.createItem}},[e._v("Create")]),0==e.tableData.length?a("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("No Clusters are configured. Please configure a new CUCM cluster. Once a new CUCM cluster has been added you will need to sign out and then back into this server with a CUCM end user account.")]):a("b-table",{attrs:{striped:"",hover:"",items:e.tableData,fields:e.columns},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(a){return e.editItem(t.item)}}},[e._v("Edit")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-modal",expression:"'edit-modal'"}],attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("Delete")])]}}],null,!1,444826290)}),a("b-modal",{attrs:{title:e.formTitle,"hide-footer":"",size:"lg"},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e.clusterChangeFailed?a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("Error encountering saving cluster. Please check settings/credentials and try again")]):e._e(),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[e._t("input-fields",null,{formdata:e.editedItem}),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:e.close}},[e._v(" Cancel ")]),a("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},[e.clusterChangeInProgress?a("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Save ")],1)],2)],1)],1):e._e()}),B=[],K={props:["endpoint","columns","formFields"],data:function(){return{editedItem:this.formFields,modalShow:!1,editedIndex:-1,tableData:null,clusterChangeFailed:!1,clusterChangeInProgress:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},username:function(){return this.$store.getters.userName}},methods:{createItem:function(){this.modalShow=!0,this.editedItem=Object.assign({},this.formFields),this.editedIndex=-1},editItem:function(e){var t=this;this.modalShow=!0,this.editedIndex=this.tableData.indexOf(e),this.editedItem=Object.assign({},e),setTimeout((function(){t.load()}),2e3)},deleteItem:function(e){var t=this.tableData.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.tableData.splice(t,1);var a=this;this.$http({method:"delete",url:this.endpoint+"/"+e.id,timeout:7500}).then((function(){a.load()}))},close:function(){var e=this;this.modalShow=!1,setTimeout((function(){e.editedItem=Object.assign({},e.formFields),e.editedIndex=-1}),300)},save:function(){var e=this;e.clusterChangeInProgress=!0,this.editedIndex>-1?(Object.assign(this.tableData[this.editedIndex],this.editedItem),this.$http({method:"put",url:this.endpoint+"/"+this.editedItem.id,data:this.editedItem,timeout:45e3}).then((function(t){e.clusterChangeInProgress=!1,"failed"==t.data.result?e.clusterChangeFailed=!0:(e.clusterChangeFailed=!1,e.$bvToast.toast("Cluster updated successfully",{title:"CUCM Cluster Settings",variant:"success",toaster:"b-toaster-top-center",autoHideDelay:5e3}),e.close()),e.load()}))):(this.tableData.push(this.editedItem),this.$http({method:"post",url:this.endpoint,data:this.editedItem,timeout:45e3}).then((function(t){e.clusterChangeInProgress=!1,"failed"==t.data.result?(e.clusterChangeFailed=!0,e.load()):(e.clusterChangeFailed=!1,e.close(),e.$bvToast.toast("Cluster added successfully.",{title:"CUCM Cluster Settings",variant:"success",toaster:"b-toaster-top-center",autoHideDelay:5e3}),e.load())})))},load:function(){var e=this;this.$http({method:"get",url:this.endpoint,timeout:5e3}).then((function(t){e.tableData=t.data}))},logOutUser:function(){this.$store.dispatch("logout")}},created:function(){this.load()}},Q=K,X=Object(f["a"])(Q,G,B,!1,null,null,null),W=X.exports,Z={name:"Settings_Management",components:{CrudTable:W},data:function(){return{cucmsyncminute:0,phonescrapetime:null,settings:{},new_authorized_user:"",authorized_cucm_users:[],selected_authorized_cucm_users:[],currentLocalAdminPassword:"",newLocalAdminPassword:"",confirm_newLocalAdminPassword:""}},mounted:function(){this.get_all_settings(),this.get_all_cucm_users()},computed:{username:function(){return this.$store.getters.userName},passwordValidation:function(){return""==this.newLocalAdminPassword||""==this.confirm_newLocalAdminPassword?null:this.confirm_newLocalAdminPassword==this.newLocalAdminPassword}},methods:{get_all_settings:function(){var e=this;this.$http({method:"get",url:"/settings_management/settings",timeout:7500}).then((function(t){t.data["cucm_update_minute"]=parseInt(t.data["cucm_update_minute"]),e.settings=t.data}))},save_settings:function(){var e=this;this.$http({method:"put",url:"/settings_management/settings",data:e.settings,timeout:7500}).then((function(t){t.data["cucm_update_minute"]=parseInt(t.data["cucm_update_minute"]),e.settings=t.data}))},get_all_cucm_users:function(){var e=this;this.$http({method:"get",url:"/settings_management/cucm_users",timeout:7500}).then((function(t){e.authorized_cucm_users=t.data}))},add_cucm_users:function(){var e=this;this.authorized_cucm_users.push(this.new_authorized_user),this.$http({method:"post",url:"/settings_management/cucm_users",data:{userid:e.new_authorized_user},timeout:7500}).then((function(){return e.get_all_cucm_users()})).catch((function(){return e.get_all_cucm_users()})),this.new_authorized_user=""},remove_cucm_users:function(){var e=this,t=this;this.selected_authorized_cucm_users.forEach((function(a){var n=t.authorized_cucm_users.indexOf(a);n>-1&&t.authorized_cucm_users.splice(n,1),e.$http({method:"delete",url:"/settings_management/cucm_users/"+a,timeout:7500}).then((function(){return t.get_all_cucm_users()})).catch((function(){return t.get_all_cucm_users()}))})),this.selected_authorized_cucm_users=[]},updatePassword:function(){var e=this;this.$http({method:"put",url:"/settings_management/updatepw",data:{current:e.currentLocalAdminPassword,new:e.newLocalAdminPassword},timeout:7500}).then((function(t){"Password successfully changed"==t.data.result?e.$bvToast.toast("The localadmin password has been changed successfully.",{title:"Password updated",variant:"success",toaster:"b-toaster-top-center",autoHideDelay:5e3}):e.$bvToast.toast("Failed to change the localadmin password. Please try again.",{title:"Password update failed",variant:"warning",toaster:"b-toaster-top-center",autoHideDelay:12e3})}))}}},ee=Z,te=Object(f["a"])(ee,J,Y,!1,null,null,null),ae=te.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[null!=e.jobstatus?a("table",{directives:[{name:"show",rawName:"v-show",value:e.jobstatus,expression:"jobstatus"}],staticClass:"table table-striped"},[e._m(0),a("tbody",e._l(e.jobstatus,(function(t,n){return a("tr",{key:n},[a("th",{attrs:{scope:"row"}},[e._v(e._s(t.jobname))]),a("td",[e._v(e._s(t.laststarttime))]),"phone scraper"==t.jobname&&"running job.."==t.result?a("td",[e._v(" "+e._s(t.result)+" [ "+e._s(e.rq_status.current_size)+" phones remaining ] ")]):a("td",[e._v(e._s(t.result))])])})),0)]):a("b-row",{attrs:{"align-h":"center"}},[a("b-spinner",{attrs:{label:"Loading..."}})],1),a("hr"),a("b-row",{attrs:{"align-h":"center"}},[a("b-button",{on:{click:e.initiateManualSyncDataUpdate}},[e._v("Trigger CUCM sync")]),a("b-button",{on:{click:e.loadJobStatusData}},[e._v("Refresh")]),a("b-button",{on:{click:e.initiateManualPhoneScrapeUpdate}},[e._v("Trigger Phone Scraping")])],1),a("b-row",{attrs:{"align-h":"center"}},[a("p",[e._v("Only one background job will run at a time. Attempts to trigger a manual update while another task is running will be ignored.")])])],1)},se=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Name")]),a("th",[e._v("Last Start")]),a("th",[e._v("Result")])])])}],re={name:"Job_Status",data:function(){return{jobstatus:null,rq_status:Object}},mounted:function(){this.loadJobStatusData()},methods:{loadJobStatusData:function(){var e=this;this.$http({method:"get",url:"/phonedata/jobstatus",timeout:5e3}).then((function(t){e.jobstatus=t.data.Job_Status,e.rq_status=t.data.RQ_Status})).catch((function(e){console.log(e)}))},initiateManualPhoneScrapeUpdate:function(){var e=this;this.$http({method:"get",url:"/phonedata/initiate_phone_scrape_now",timeout:5e3}).then((function(){e.$bvToast.toast("manual phone scrape has been triggered",{title:"Sync Data",variant:"success",toaster:"b-toaster-top-center",autoHideDelay:5e3})})).catch((function(t){console.log(t),e.$bvToast.toast("manual phone scrape has failed",{title:"Sync Data",variant:"warning",toaster:"b-toaster-top-center",autoHideDelay:5e3})}))},initiateManualSyncDataUpdate:function(){var e=this;this.$http({method:"get",url:"/phonedata/poll_cucm_now",timeout:5e3}).then((function(){e.$bvToast.toast("manual sync has been triggered",{title:"Sync Data",variant:"success",toaster:"b-toaster-top-center",autoHideDelay:5e3})})).catch((function(t){console.log(t),e.$bvToast.toast("manual sync has failed",{title:"Sync Data",variant:"warning",toaster:"b-toaster-top-center",autoHideDelay:5e3})}))}}},oe=re,ie=Object(f["a"])(oe,ne,se,!1,null,null,null),le=ie.exports,ue={name:"App",data:function(){return{MenuTabs:["Phone Info","Settings Management","Job Status"],NavSelection:""}},components:{Header:v,Login:k,MainNavbar:I,Phone_Info:V,Settings_Management:ae,Job_Status:le,IdleTimeout:A},methods:{navChangeTop:function(e){this.NavSelection=e.replace(" ","_")},localadminLogin:function(){""==this.NavSelection&&(this.NavSelection="Settings_Management")}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},username:function(){return this.$store.getters.userName},isIdle:function(){return this.$store.state.idleVue.isIdle}},updated:function(){this.isLoggedIn&&"localadmin"==this.username&&this.localadminLogin()}},de=ue,ce=Object(f["a"])(de,r,o,!1,null,null,null),me=ce.exports,fe=a("5f5b"),he=a("bc3a"),pe=a.n(he);n["default"].use(s["a"]);var be=new s["a"].Store({state:{status:"",token:"",username:""},mutations:{auth_request:function(e){e.status="loading"},auth_success:function(e,t){e.status="success",e.token=t.token,e.username=t.username},auth_error:function(e){e.status="error"},logout:function(e){e.status="",e.token="",e.username=""}},actions:{login:function(e,t){var a=e.commit;return new Promise((function(e,s){var r=new FormData;r.set("username",t.user_id),r.set("password",t.password),a("auth_request"),pe()({baseURL:"",url:"/auth/get_token",data:r,method:"POST"}).then((function(t){var s=t.data.access_token,r=t.data.user_name;console.log("username is "+r),n["default"].prototype.$http.defaults.headers.common["Authorization"]="Bearer "+s,a("auth_success",{token:s,username:r}),e(t)})).catch((function(e){a("auth_error"),s(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e){n["default"].prototype.$http.defaults.headers.common["Authorization"]="",t("logout"),e()}))}},getters:{isLoggedIn:function(e){return!!e.token},authStatus:function(e){return e.status},userName:function(e){return e.username},token:function(e){return e.token}}}),ge=a("dcb8"),_e=a.n(ge);a("f9e3"),a("2dd8");n["default"].config.productionTip=!1,n["default"].use(fe["a"]),n["default"].prototype.$http=pe.a.create({baseURL:"",timeout:5e3}),n["default"].prototype.$http.interceptors.response.use((function(e){return e}),(function(e){if(console.log("http intercepter error code "+e.response.status),401!==e.response.status)return Promise.reject(e);console.log("logging user out due to 401"),be.commit("logout")})),n["default"].use(s["a"]);var ve=new n["default"];n["default"].use(_e.a,{eventEmitter:ve,store:be,idleTime:18e5,startAtIdle:!1}),new n["default"]({store:be,render:function(e){return e(me)}}).$mount("#app")}});
//# sourceMappingURL=app.b966c25b.js.map